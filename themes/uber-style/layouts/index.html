{{ define "main" }}
<section class="hero">
    <div class="container">
        <div class="hero__content">
            <div class="hero__decoration">
                <div class="decoration-dots"></div>
                <div class="decoration-line"></div>
            </div>
            <h1 class="hero__title">
                <span class="hero__title-main">Engineering Excellence</span>
                <span class="hero__title-accent">Redefined</span>
            </h1>
            <p class="hero__subtitle">
                Deep dives into architecture, scalable systems, and the technology that powers modern applications.
                Discover insights from real-world engineering challenges and solutions.
            </p>
            <div class="hero__stats">
                <div class="hero__stat">
                    <span class="hero__stat-number">{{ len (where site.RegularPages "Type" "posts") }}</span>
                    <span class="hero__stat-label">Articles</span>
                </div>
                <div class="hero__stat">
                    <span class="hero__stat-number">{{ len .Site.Taxonomies.categories }}</span>
                    <span class="hero__stat-label">Categories</span>
                </div>
                <div class="hero__stat">
                    <span class="hero__stat-number">{{ len .Site.Taxonomies.tags }}</span>
                    <span class="hero__stat-label">Topics</span>
                </div>
            </div>
            <div class="hero__actions">
                <a href="#posts" class="hero__cta hero__cta--primary">Explore Articles</a>
                <a href="/posts-list/" class="hero__cta hero__cta--secondary">Browse All Posts</a>
            </div>
        </div>
    </div>
</section>

<section class="featured-posts" id="posts">
    <div class="container">
        <div class="section-header">
            <div class="section-header__content">
                <h2 class="section-header__title">Latest Articles</h2>
                <p class="section-header__subtitle">Technical insights and deep dives from our engineering team</p>
            </div>
            <div class="section-header__actions">
                <div class="view-controls">
                    <button class="view-control active" data-view="grid" title="Grid View">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <rect x="3" y="3" width="7" height="7" stroke="currentColor" stroke-width="2" fill="none"/>
                            <rect x="14" y="3" width="7" height="7" stroke="currentColor" stroke-width="2" fill="none"/>
                            <rect x="3" y="14" width="7" height="7" stroke="currentColor" stroke-width="2" fill="none"/>
                            <rect x="14" y="14" width="7" height="7" stroke="currentColor" stroke-width="2" fill="none"/>
                        </svg>
                    </button>
                    <button class="view-control" data-view="list" title="List View">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <line x1="8" y1="6" x2="21" y2="6" stroke="currentColor" stroke-width="2"/>
                            <line x1="8" y1="12" x2="21" y2="12" stroke="currentColor" stroke-width="2"/>
                            <line x1="8" y1="18" x2="21" y2="18" stroke="currentColor" stroke-width="2"/>
                            <line x1="3" y1="6" x2="3.01" y2="6" stroke="currentColor" stroke-width="2"/>
                            <line x1="3" y1="12" x2="3.01" y2="12" stroke="currentColor" stroke-width="2"/>
                            <line x1="3" y1="18" x2="3.01" y2="18" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        {{ $posts := where site.RegularPages "Type" "posts" }}
        {{ $featuredPosts := $posts | first 8 }}

        {{ if $featuredPosts }}
        <!-- Grid View -->
        <div class="posts-grid" id="gridView">
            {{ range $featuredPosts }}
            <article class="post-card">
                <div class="post-card__header">
                    <div class="post-card__meta">
                        <time class="post-card__date" datetime="{{ .Date.Format "2006-01-02" }}">
                            {{ .Date.Format "Jan 2, 2006" }}
                        </time>
                        {{ if .Params.readTime }}
                        <span class="post-card__read-time">{{ .Params.readTime }} read</span>
                        {{ end }}
                    </div>
                    {{ if .Params.categories }}
                    <div class="post-card__categories">
                        {{ range first 1 .Params.categories }}
                        <span class="post-card__category">{{ . }}</span>
                        {{ end }}
                    </div>
                    {{ end }}
                </div>

                <div class="post-card__content">
                    <h3 class="post-card__title">
                        <a href="{{ .RelPermalink }}" class="post-card__link">{{ .Title }}</a>
                    </h3>

                    <p class="post-card__excerpt">
                        {{ if .Params.description }}
                            {{ .Params.description | truncate 120 }}
                        {{ else if .Params.summary }}
                            {{ .Params.summary | truncate 120 }}
                        {{ else }}
                            {{ .Summary | truncate 120 }}
                        {{ end }}
                    </p>
                </div>

                <div class="post-card__footer">
                    {{ if .Params.tags }}
                    <div class="post-card__tags">
                        {{ range first 3 .Params.tags }}
                        <span class="post-card__tag">{{ . }}</span>
                        {{ end }}
                        {{ if gt (len .Params.tags) 3 }}
                        <span class="post-card__tag-more">+{{ sub (len .Params.tags) 3 }}</span>
                        {{ end }}
                    </div>
                    {{ end }}
                    <div class="post-card__author">
                        <span class="post-card__author-name">{{ with .Params.author }}{{ . }}{{ else }}{{ .Site.Params.author }}{{ end }}</span>
                    </div>
                </div>
            </article>
            {{ end }}
        </div>

        <!-- List View -->
        <div class="posts-list-view" id="listView" style="display: none;">
            {{ range $featuredPosts }}
            <article class="post-list-item">
                <div class="post-list-item__content">
                    <div class="post-list-item__meta">
                        <time class="post-list-item__date" datetime="{{ .Date.Format "2006-01-02" }}">
                            {{ .Date.Format "Jan 2, 2006" }}
                        </time>
                        {{ if .Params.categories }}
                        <span class="post-list-item__category">{{ index .Params.categories 0 }}</span>
                        {{ end }}
                        {{ if .Params.readTime }}
                        <span class="post-list-item__read-time">{{ .Params.readTime }} read</span>
                        {{ end }}
                    </div>

                    <h3 class="post-list-item__title">
                        <a href="{{ .RelPermalink }}" class="post-list-item__link">{{ .Title }}</a>
                    </h3>

                    <p class="post-list-item__excerpt">
                        {{ if .Params.description }}
                            {{ .Params.description | truncate 200 }}
                        {{ else if .Params.summary }}
                            {{ .Params.summary | truncate 200 }}
                        {{ else }}
                            {{ .Summary | truncate 200 }}
                        {{ end }}
                    </p>

                    <div class="post-list-item__footer">
                        {{ if .Params.tags }}
                        <div class="post-list-item__tags">
                            {{ range first 4 .Params.tags }}
                            <span class="post-list-item__tag">{{ . }}</span>
                            {{ end }}
                            {{ if gt (len .Params.tags) 4 }}
                            <span class="post-list-item__tag-more">+{{ sub (len .Params.tags) 4 }}</span>
                            {{ end }}
                        </div>
                        {{ end }}
                        <span class="post-list-item__author">{{ with .Params.author }}{{ . }}{{ else }}{{ .Site.Params.author }}{{ end }}</span>
                    </div>
                </div>
            </article>
            {{ end }}
        </div>
        {{ else }}
        <div class="posts-empty">
            <div class="posts-empty__content">
                <h3>No posts yet</h3>
                <p>Check back soon for technical insights and engineering deep dives!</p>
            </div>
        </div>
        {{ end }}
    </div>
</section>

<!-- Categories Section -->
<section class="categories-section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-header__title">Explore by Category</h2>
            <p class="section-header__subtitle">Discover content organized by technical domains</p>
        </div>

        <div class="categories-grid">
            {{ range .Site.Taxonomies.categories.ByCount }}
            <a href="{{ .Page.RelPermalink }}" class="category-card">
                <div class="category-card__content">
                    <h3 class="category-card__title">{{ .Page.Title }}</h3>
                    <span class="category-card__count">{{ .Count }} {{ if eq .Count 1 }}article{{ else }}articles{{ end }}</span>
                </div>
                <div class="category-card__arrow">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
            </a>
            {{ end }}
        </div>
    </div>
</section>

<!-- Newsletter/CTA Section -->
<section class="cta-section">
    <div class="container">
        <div class="cta-content">
            <div class="cta-content__text">
                <h2 class="cta-content__title">Stay Updated</h2>
                <p class="cta-content__subtitle">
                    Get the latest engineering insights and technical deep dives delivered straight to your inbox.
                </p>
            </div>
            <div class="cta-content__actions">
                <a href="/posts-list/" class="hero__cta hero__cta--primary">Browse All Posts</a>
                <a href="/about/" class="hero__cta hero__cta--secondary">Learn More</a>
            </div>
        </div>
    </div>
</section>

<style>
/* CSS Variables for consistent theming */
:root {
    --color-black: #000000;
    --color-white: #ffffff;
    --color-gray-50: #fafafa;
    --color-gray-100: #f5f5f5;
    --color-gray-200: #e5e5e5;
    --color-gray-300: #d4d4d4;
    --color-gray-400: #a3a3a3;
    --color-gray-500: #737373;
    --color-gray-600: #525252;
    --color-gray-700: #404040;
    --color-gray-800: #262626;
    --color-gray-900: #171717;

    --shadow-soft: 0 10px 30px rgba(0, 0, 0, 0.1);
    --shadow-hover: 0 20px 40px rgba(0, 0, 0, 0.15);
    --border-radius-lg: 1rem;
    --border-radius-md: 0.75rem;
    --border-radius-sm: 0.5rem;
    --transition-all: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

    --font-size-xs: 0.875rem;
    --font-size-sm: 1rem;
    --font-size-md: 1.125rem;
    --font-size-lg: 1.25rem;
    --font-size-xl: 1.5rem;
    --font-size-2xl: 2rem;
    --font-size-3xl: 2.5rem;
    --font-size-4xl: 3rem;
}

/* Container */
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
}

/* Hero Section */
.hero {
    background: var(--color-white);
    padding: 4rem 0 5rem;
    position: relative;
    overflow: hidden;
}

.hero__content {
    text-align: center;
    position: relative;
    z-index: 2;
    max-width: 800px;
    margin: 0 auto;
}

.hero__decoration {
    position: absolute;
    top: -2rem;
    left: 50%;
    transform: translateX(-50%);
    width: 100%;
    pointer-events: none;
}

.decoration-dots {
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 150px;
    height: 150px;
    background: radial-gradient(circle, var(--color-gray-200) 2px, transparent 2px);
    background-size: 20px 20px;
    opacity: 0.3;
    border-radius: 50%;
}

.decoration-line {
    position: absolute;
    bottom: -1rem;
    left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 3px;
    background: var(--color-black);
    border-radius: 2px;
}

.hero__title {
    margin-bottom: 1.5rem;
}

.hero__title-main {
    display: block;
    font-size: var(--font-size-4xl);
    font-weight: 800;
    color: var(--color-black);
    letter-spacing: -0.02em;
    line-height: 1.1;
    margin-bottom: 0.5rem;
}

.hero__title-accent {
    display: block;
    font-size: var(--font-size-2xl);
    font-weight: 300;
    color: var(--color-gray-600);
    letter-spacing: 0.05em;
}

.hero__subtitle {
    font-size: var(--font-size-lg);
    color: var(--color-gray-600);
    line-height: 1.6;
    margin-bottom: 2.5rem;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
}

.hero__stats {
    display: flex;
    justify-content: center;
    gap: 3rem;
    margin-bottom: 2.5rem;
}

.hero__stat {
    text-align: center;
}

.hero__stat-number {
    display: block;
    font-size: var(--font-size-2xl);
    font-weight: 800;
    color: var(--color-black);
    line-height: 1;
}

.hero__stat-label {
    display: block;
    font-size: var(--font-size-sm);
    color: var(--color-gray-500);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-top: 0.25rem;
}

.hero__actions {
    display: flex;
    justify-content: center;
    gap: 1rem;
    flex-wrap: wrap;
}

.hero__cta {
    display: inline-block;
    padding: 1rem 2rem;
    border-radius: var(--border-radius-md);
    font-size: var(--font-size-md);
    font-weight: 600;
    text-decoration: none;
    transition: var(--transition-all);
    border: 2px solid transparent;
}

.hero__cta--primary {
    background: var(--color-black);
    color: var(--color-white);
}

.hero__cta--primary:hover {
    background: var(--color-gray-800);
    transform: translateY(-2px);
    box-shadow: var(--shadow-hover);
}

.hero__cta--secondary {
    background: transparent;
    color: var(--color-black);
    border-color: var(--color-gray-300);
}

.hero__cta--secondary:hover {
    border-color: var(--color-black);
    transform: translateY(-2px);
    box-shadow: var(--shadow-soft);
}

/* Section Header */
.section-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    margin-bottom: 3rem;
    gap: 2rem;
}

.section-header__content {
    flex: 1;
}

.section-header__title {
    font-size: var(--font-size-3xl);
    font-weight: 800;
    color: var(--color-black);
    margin-bottom: 0.5rem;
    letter-spacing: -0.02em;
}

.section-header__subtitle {
    font-size: var(--font-size-md);
    color: var(--color-gray-600);
    line-height: 1.5;
}

/* View Controls */
.view-controls {
    display: flex;
    background: var(--color-gray-100);
    border-radius: var(--border-radius-md);
    padding: 0.25rem;
    border: 1px solid var(--color-gray-300);
}

.view-control {
    padding: 0.75rem;
    border: none;
    background: transparent;
    color: var(--color-gray-600);
    cursor: pointer;
    border-radius: var(--border-radius-sm);
    transition: var(--transition-all);
    display: flex;
    align-items: center;
    justify-content: center;
}

.view-control.active {
    background: var(--color-black);
    color: var(--color-white);
}

.view-control:hover:not(.active) {
    background: var(--color-gray-200);
}

/* Featured Posts Section */
.featured-posts {
    padding: 4rem 0;
    background: var(--color-gray-50);
}

/* Posts Grid */
.posts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    gap: 2rem;
}

.post-card {
    background: var(--color-white);
    border-radius: var(--border-radius-lg);
    padding: 1.5rem;
    border: 1px solid var(--color-gray-200);
    transition: var(--transition-all);
    position: relative;
    height: fit-content;
}

.post-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-hover);
    border-color: var(--color-gray-300);
}

.post-card__header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 1rem;
    gap: 1rem;
}

.post-card__meta {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.post-card__date {
    font-size: var(--font-size-xs);
    color: var(--color-gray-500);
    font-weight: 500;
}

.post-card__read-time {
    font-size: var(--font-size-xs);
    color: var(--color-gray-400);
}

.post-card__categories {
    flex-shrink: 0;
}

.post-card__category {
    background: var(--color-black);
    color: var(--color-white);
    padding: 0.25rem 0.75rem;
    border-radius: var(--border-radius-sm);
    font-size: var(--font-size-xs);
    font-weight: 600;
}

.post-card__content {
    margin-bottom: 1.5rem;
}

.post-card__title {
    margin: 0 0 1rem 0;
    font-size: var(--font-size-xl);
    line-height: 1.3;
}

.post-card__link {
    color: var(--color-black);
    text-decoration: none;
    font-weight: 700;
    transition: var(--transition-all);
}

.post-card__link:hover {
    color: var(--color-gray-700);
}

.post-card__excerpt {
    color: var(--color-gray-600);
    line-height: 1.6;
    margin: 0;
    font-size: var(--font-size-md);
}

.post-card__footer {
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    gap: 1rem;
    padding-top: 1rem;
    border-top: 1px solid var(--color-gray-200);
}

.post-card__tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    flex: 1;
}

.post-card__tag {
    background: var(--color-gray-200);
    color: var(--color-gray-700);
    padding: 0.25rem 0.5rem;
    border-radius: var(--border-radius-sm);
    font-size: var(--font-size-xs);
    font-weight: 500;
}

.post-card__tag-more {
    background: var(--color-gray-600);
    color: var(--color-white);
    padding: 0.25rem 0.5rem;
    border-radius: var(--border-radius-sm);
    font-size: var(--font-size-xs);
    font-weight: 600;
}

.post-card__author {
    flex-shrink: 0;
}

.post-card__author-name {
    font-size: var(--font-size-xs);
    color: var(--color-gray-500);
    font-weight: 500;
}

/* Posts List View */
.posts-list-view {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.post-list-item {
    background: var(--color-white);
    border-radius: var(--border-radius-lg);
    padding: 2rem;
    border: 1px solid var(--color-gray-200);
    transition: var(--transition-all);
}

.post-list-item:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-soft);
    border-color: var(--color-gray-300);
}

.post-list-item__meta {
    display: flex;
    gap: 1rem;
    margin-bottom: 1rem;
    flex-wrap: wrap;
    align-items: center;
}

.post-list-item__date {
    font-size: var(--font-size-sm);
    color: var(--color-gray-500);
    font-weight: 500;
}

.post-list-item__category {
    background: var(--color-black);
    color: var(--color-white);
    padding: 0.25rem 0.75rem;
    border-radius: var(--border-radius-sm);
    font-size: var(--font-size-xs);
    font-weight: 600;
}

.post-list-item__read-time {
    font-size: var(--font-size-xs);
    color: var(--color-gray-400);
}

.post-list-item__title {
    margin: 0 0 1rem 0;
    font-size: var(--font-size-2xl);
    line-height: 1.3;
}

.post-list-item__link {
    color: var(--color-black);
    text-decoration: none;
    font-weight: 700;
    transition: var(--transition-all);
}

.post-list-item__link:hover {
    color: var(--color-gray-700);
    text-decoration: underline;
}

.post-list-item__excerpt {
    color: var(--color-gray-600);
    line-height: 1.6;
    margin: 0 0 1.5rem 0;
    font-size: var(--font-size-md);
}

.post-list-item__footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 1rem;
    flex-wrap: wrap;
}

.post-list-item__tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    flex: 1;
}

.post-list-item__tag {
    background: var(--color-gray-200);
    color: var(--color-gray-700);
    padding: 0.25rem 0.5rem;
    border-radius: var(--border-radius-sm);
    font-size: var(--font-size-xs);
    font-weight: 500;
}

.post-list-item__tag-more {
    background: var(--color-gray-600);
    color: var(--color-white);
    padding: 0.25rem 0.5rem;
    border-radius: var(--border-radius-sm);
    font-size: var(--font-size-xs);
    font-weight: 600;
}

.post-list-item__author {
    font-size: var(--font-size-sm);
    color: var(--color-gray-500);
    font-weight: 500;
}

/* Empty State */
.posts-empty {
    text-align: center;
    padding: 4rem 2rem;
}

.posts-empty__content h3 {
    font-size: var(--font-size-xl);
    color: var(--color-black);
    margin-bottom: 1rem;
}

.posts-empty__content p {
    color: var(--color-gray-600);
    font-size: var(--font-size-md);
}

/* Categories Section */
.categories-section {
    padding: 4rem 0;
    background: var(--color-white);
}

.categories-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 1.5rem;
}

.category-card {
    background: var(--color-white);
    border: 1px solid var(--color-gray-200);
    border-radius: var(--border-radius-lg);
    padding: 1.5rem;
    text-decoration: none;
    color: inherit;
    transition: var(--transition-all);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.category-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-soft);
    border-color: var(--color-gray-300);
}

.category-card__title {
    font-size: var(--font-size-lg);
    font-weight: 700;
    color: var(--color-black);
    margin: 0 0 0.25rem 0;
    text-transform: capitalize;
}

.category-card__count {
    font-size: var(--font-size-sm);
    color: var(--color-gray-500);
    font-weight: 500;
}

.category-card__arrow {
    color: var(--color-gray-400);
    transition: var(--transition-all);
}

.category-card:hover .category-card__arrow {
    color: var(--color-black);
    transform: translateX(4px);
}

/* CTA Section */
.cta-section {
    padding: 4rem 0;
    background: var(--color-gray-800);
}

.cta-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 3rem;
}

.cta-content__text {
    flex: 1;
}

.cta-content__title {
    font-size: var(--font-size-3xl);
    font-weight: 800;
    color: var(--color-white);
    margin-bottom: 1rem;
    letter-spacing: -0.02em;
}

.cta-content__subtitle {
    font-size: var(--font-size-lg);
    color: var(--color-gray-300);
    line-height: 1.6;
}

.cta-content__actions {
    display: flex;
    gap: 1rem;
    flex-shrink: 0;
}

.cta-section .hero__cta--primary {
    background: var(--color-white);
    color: var(--color-black);
}

.cta-section .hero__cta--primary:hover {
    background: var(--color-gray-100);
}

.cta-section .hero__cta--secondary {
    border-color: var(--color-gray-600);
    color: var(--color-white);
}

.cta-section .hero__cta--secondary:hover {
    border-color: var(--color-white);
}

/* Responsive Design */
@media (max-width: 1024px) {
    .posts-grid {
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 1.5rem;
    }

    .categories-grid {
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    }
}

@media (max-width: 768px) {
    .container {
        padding: 0 1.5rem;
    }

    .hero {
        padding: 3rem 0 4rem;
    }

    .hero__title-main {
        font-size: var(--font-size-3xl);
    }

    .hero__title-accent {
        font-size: var(--font-size-xl);
    }

    .hero__stats {
        gap: 2rem;
    }

    .hero__actions {
        flex-direction: column;
        align-items: center;
    }

    .hero__cta {
        width: 100%;
        max-width: 300px;
        text-align: center;
    }

    .section-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }

    .section-header__title {
        font-size: var(--font-size-2xl);
    }

    .posts-grid {
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }

    .post-list-item {
        padding: 1.5rem;
    }

    .post-list-item__title {
        font-size: var(--font-size-xl);
    }

    .post-list-item__footer {
        flex-direction: column;
        align-items: flex-start;
    }

    .categories-grid {
        grid-template-columns: 1fr;
    }

    .cta-content {
        flex-direction: column;
        text-align: center;
        gap: 2rem;
    }

    .cta-content__actions {
        flex-direction: column;
        width: 100%;
    }

    .cta-content__actions .hero__cta {
        width: 100%;
        max-width: 300px;
    }
}

@media (max-width: 480px) {
    .hero__title-main {
        font-size: var(--font-size-2xl);
    }

    .hero__subtitle {
        font-size: var(--font-size-md);
    }

    .hero__stats {
        flex-direction: column;
        gap: 1rem;
    }

    .post-card {
        padding: 1rem;
    }

    .post-card__title {
        font-size: var(--font-size-lg);
    }

    .post-card__footer {
        flex-direction: column;
        align-items: flex-start;
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // View toggle functionality
    const viewControls = document.querySelectorAll('.view-control');
    const gridView = document.getElementById('gridView');
    const listView = document.getElementById('listView');

    viewControls.forEach(control => {
        control.addEventListener('click', function() {
            const view = this.dataset.view;

            // Update active state
            viewControls.forEach(c => c.classList.remove('active'));
            this.classList.add('active');

            // Switch views
            if (view === 'grid') {
                gridView.style.display = 'grid';
                listView.style.display = 'none';
            } else {
                gridView.style.display = 'none';
                listView.style.display = 'block';
            }

            // Save preference
            localStorage.setItem('homeViewMode', view);
        });
    });

    // Load saved view preference
    const savedView = localStorage.getItem('homeViewMode');
    if (savedView) {
        const control = document.querySelector(`[data-view="${savedView}"]`);
        if (control) {
            control.click();
        }
    }

    // Smooth scroll for hero CTA
    const heroCtaLink = document.querySelector('.hero__cta[href="#posts"]');
    if (heroCtaLink) {
        heroCtaLink.addEventListener('click', function(e) {
            e.preventDefault();
            document.getElementById('posts').scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        });
    }

    // Animation on load
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);

    // Observe cards and sections
    const cards = document.querySelectorAll('.post-card, .post-list-item, .category-card');
    cards.forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        card.style.transition = `opacity 0.6s ease ${index * 0.1}s, transform 0.6s ease ${index * 0.1}s`;
        observer.observe(card);
    });
});
</script>
{{ end }}